<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kick Auto Commenter</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #8dd0d8;
      padding: 30px;
      color: #333;
    }
    h2 {
      text-align: center;
      color: #2c3e50;
    }
    .container {
      max-width: 600px;
      margin: auto;
      background: white;
      padding: 20px 30px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    textarea, input {
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
      box-sizing: border-box;
      resize: none;
      overflow-y: hidden;
    }
    button {
      padding: 10px 20px;
      margin: 10px 5px 0 0;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.2s ease-in-out;
    }
    button:hover {
      opacity: 0.9;
    }
    #startBtn {
      background-color: #04ec65;
      color: rgb(255, 255, 255);
    }
    #stopBtn {
      background-color: #da0000;
      color: rgb(255, 255, 255);
    }
    #log {
      background: #eeecec;
      padding: 10px;
      margin-top: 15px;
      border-radius: 6px;
      max-height: 200px;
      overflow-y: auto;
      font-family: monospace;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>ğŸ¯  Auto </h2>

    <label>ğŸ« Bearer Tokens (ÙˆØ§Ø­Ø¯ Ø¨ÙƒÙ„ Ø³Ø·Ø±)</label>
    <textarea id="tokens" rows="20" placeholder="Bearer eyJ..."></textarea>

    <label>ğŸ’¬ Comments (ÙˆØ§Ø­Ø¯ Ø¨ÙƒÙ„ Ø³Ø·Ø±)</label>
    <textarea id="comments" rows="4" placeholder="Ù…Ù†ÙˆØ± Ø§Ù„Ø¨Ø«\nØªØ§Ø¨Ø¹Ù†ÙŠ Ùˆ Ù„Ø§ÙŠÙƒ ğŸ”¥"></textarea>

    <label>ğŸ“º Channel Name</label>
    <input type="text" id="channel" placeholder="username" />

    <label>â±ï¸ Delay Between Comments (seconds)</label>
    <input type="number" id="interval" placeholder="Ù…Ø«Ù„Ø§Ù‹: 3" value="3" min="1" />

    <button id="startBtn" onclick="start()"> Start</button>
    <button id="stopBtn" onclick="stop()"> Stop</button>

    <div id="log"></div>
  </div>

  <script>
    // Ø¯Ø§Ù„Ø© Ù„ØªØ¹Ø¯ÙŠÙ„ Ø§Ø±ØªÙØ§Ø¹ Ù…Ø±Ø¨Ø¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø­Ø³Ø¨ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
    function autoResizeTextarea(textarea) {
      textarea.style.height = 'auto';
      textarea.style.height = textarea.scrollHeight + 'px';
    }

    // Ø±Ø¨Ø· Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù…Ø¹ Ù…Ø±Ø¨Ø¹ Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª
    const commentsTextarea = document.getElementById('comments');
    commentsTextarea.addEventListener('input', () => autoResizeTextarea(commentsTextarea));

    // Ù†ÙØ°Ù‡Ø§ Ù…Ø±Ø© ÙˆØ­Ø¯Ø© Ø£ÙˆÙ„ Ù…Ø§ ØªØ­Ù…Ù„ Ø§Ù„ØµÙØ­Ø© Ø¹Ø´Ø§Ù† ÙŠØ­Ø· Ø§Ù„Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ Ù„Ùˆ ÙÙŠÙ‡ Ù†Øµ Ø¬Ø§Ù‡Ø²
    window.onload = () => autoResizeTextarea(commentsTextarea);

    let intervalId = null;
    let isRunning = false;
    let previousComments = {};

    function getRandomComment(comments, token) {
      const previous = previousComments[token];
      let available = comments;
      if (previous) {
        available = comments.filter(c => c !== previous);
        if (available.length === 0) available = comments;
      }
      const comment = available[Math.floor(Math.random() * available.length)];
      previousComments[token] = comment;
      return comment;
    }

    async function getChatroomId(channel) {
      const res = await fetch(`https://kick.com/api/v2/channels/${channel}`);
      const data = await res.json();
      return data.chatroom.id;
    }

    function log(message) {
      const div = document.getElementById("log");
      div.innerHTML += `ğŸ“ ${message}<br>`;
      div.scrollTop = div.scrollHeight;
    }

    async function start() {
      if (isRunning) return;
      isRunning = true;

      const tokens = document.getElementById("tokens").value.trim().split("\n").map(t => t.trim()).filter(Boolean);
      const comments = document.getElementById("comments").value.trim().split("\n").map(c => c.trim()).filter(Boolean);
      const channel = document.getElementById("channel").value.trim();
      let interval = parseInt(document.getElementById("interval").value);

      if (!channel || tokens.length === 0 || comments.length === 0 || isNaN(interval) || interval < 1) {
        alert("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­! ÙˆÙ…Ø¯Ø© Ø§Ù„ØªØ£Ø®ÙŠØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 1 Ø«Ø§Ù†ÙŠØ© Ø£Ùˆ Ø£ÙƒØ«Ø±.");
        isRunning = false;
        return;
      }

      interval = interval * 1000;

      try {
        const chatroomId = await getChatroomId(channel);
        log(`âœ… Chatroom ID: ${chatroomId}`);

        let index = 0;

        intervalId = setInterval(() => {
          if (!isRunning) return;

          const token = tokens[index % tokens.length];
          const comment = getRandomComment(comments, token);

          fetch("https://kick.com/api/v1/chat-messages", {
            method: "POST",
            headers: {
              Authorization: token,
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              message: comment,
              chatroom_id: chatroomId,
            }),
          })
            .then((res) => {
              if (!res.ok) throw new Error(`HTTP ${res.status}`);
              log(`âœ… [${index + 1}] Sent: "${comment}"`);
            })
            .catch((err) => {
              log(`âŒ Error: ${err.message}`);
            });

          index++;
        }, interval);
      } catch (error) {
        log(`âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Chatroom ID: ${error.message}`);
        isRunning = false;
      }
    }

    function stop() {
      if (!isRunning) return;
      clearInterval(intervalId);
      isRunning = false;
      log("â›” ØªÙ… Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù.");
    }
  </script>
</body>
</html>
